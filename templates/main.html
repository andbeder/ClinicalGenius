<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clinical Genius - CRM Analytics Prompt Execution</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 sidebar bg-dark text-white p-3">
                <h4 class="mb-4">Clinical Genius</h4>
                <ul class="nav nav-pills flex-column">
                    <li class="nav-item">
                        <a class="nav-link active" data-tab="datasets" href="#datasets">Datasets</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-tab="analysis" href="#analysis">Analysis</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-tab="prompt-builder" href="#prompt-builder">Prompt Builder</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-tab="proving-ground" href="#proving-ground">Proving Ground</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-tab="batch-execution" href="#batch-execution">Batch Execution</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-tab="history" href="#history">History</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-tab="settings" href="#settings">Settings</a>
                    </li>
                </ul>
                <hr class="my-4">
                <div class="text-muted small">
                    <div class="mb-2">
                        <strong>User:</strong><br>
                        <span id="current-user-display" class="badge bg-info">Loading...</span>
                    </div>
                    <div id="connection-status">
                        <span class="badge bg-secondary">Not Connected</span>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-md-9 col-lg-10 main-content p-4">
                <!-- Datasets Tab -->
                <div id="datasets-tab" class="tab-content active">
                    <h2 class="mb-4">Dataset Management</h2>

                    <!-- Configured Datasets List -->
                    <div class="card mb-4">
                        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Configured Datasets</h5>
                            <button id="create-dataset-btn" class="btn btn-light btn-sm">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16">
                                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                                    <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
                                </svg>
                                New Dataset
                            </button>
                        </div>
                        <div class="card-body">
                            <div id="datasets-loading" class="text-center py-3">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                            </div>
                            <div id="datasets-list-container" style="display: none;">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>CRM Analytics Dataset</th>
                                            <th>Record ID Field</th>
                                            <th>Fields</th>
                                            <th>Picklists</th>
                                            <th>Filter</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="datasets-list-tbody">
                                        <!-- Populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                            <div id="no-datasets" style="display: none;">
                                <p class="text-muted text-center py-3">No datasets configured. Click "New Dataset" to create one.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Analysis Tab -->
                <div id="analysis-tab" class="tab-content">
                    <h2 class="mb-4">Analysis Dashboard</h2>


                    <!-- Recent Analysis Batches -->
                    <div class="card mb-4">
                        <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Recent Analysis Batches</h5>
                            <button id="create-batch-btn" class="btn btn-light btn-sm">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16">
                                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                                    <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
                                </svg>
                                New Analysis
                            </button>
                        </div>
                        <div class="card-body">
                            <div id="batches-loading" class="text-center py-3">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                            </div>
                            <div id="batches-list" style="display: none;">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Batch Name</th>
                                            <th>Dataset</th>
                                            <th>Status</th>
                                            <th>Records</th>
                                            <th>Created</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="batches-tbody">
                                        <!-- Populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                            <div id="no-batches" style="display: none;">
                                <p class="text-muted text-center py-3">No analysis batches found. Click "New Analysis" to create one.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Prompt Builder Tab -->
                <div id="prompt-builder-tab" class="tab-content" style="display: none;">
                    <h2 class="mb-4">Prompt Builder</h2>

                    <!-- Analysis Batch Selection -->
                    <div class="card mb-4">
                        <div class="card-header bg-primary text-white">
                            <h5 class="mb-0">Select Analysis Batch</h5>
                        </div>
                        <div class="card-body">
                            <select id="prompt-batch-select" class="form-select">
                                <option value="">-- Select an analysis batch --</option>
                            </select>
                            <div id="prompt-batch-info" class="mt-3" style="display: none;">
                                <p class="mb-1"><strong>Dataset:</strong> <span id="prompt-dataset-name"></span></p>
                                <p class="mb-0"><strong>Status:</strong> <span id="prompt-batch-status"></span></p>
                            </div>
                        </div>
                    </div>

                    <!-- Dataset Fields Selection -->
                    <div class="card mb-4">
                        <div class="card-header bg-info text-white">
                            <h5 class="mb-0">Dataset Fields</h5>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small mb-3">Select fields to include in your prompt context. Click a field to insert it into your prompt as <code>{{field_name}}</code></p>
                            <div id="dataset-fields-loading" class="text-center py-3">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                            </div>
                            <div id="dataset-fields-container" style="display: none;">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h6>Dimensions (Text Fields)</h6>
                                        <div id="dimension-fields" class="field-list">
                                            <!-- Populated by JavaScript -->
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <h6>Picklist Fields</h6>
                                        <div id="picklist-fields" class="field-list">
                                            <!-- Populated by JavaScript -->
                                        </div>
                                        <div id="no-picklist-fields" class="text-muted small" style="display: none;">
                                            No picklist fields configured for this dataset.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="no-batch-selected" class="text-muted text-center py-3">
                                Please select an analysis batch to load dataset fields.
                            </div>
                        </div>
                    </div>

                    <!-- Prompt Template Editor -->
                    <div class="card mb-4">
                        <div class="card-header bg-success text-white">
                            <h5 class="mb-0">Prompt Template</h5>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small mb-3">Write your prompt template using <code>{{field_name}}</code> syntax to reference dataset fields.</p>
                            <textarea id="prompt-template" class="form-control font-monospace" rows="12" placeholder="Example:
Analyze the following record data:

Patient Name: {{patient_name}}
Amount: {{amount}}
Diagnosis: {{diagnosis}}

Provide a comprehensive analysis including risk factors and recommendations."></textarea>
                            <div class="mt-3">
                                <button id="save-prompt-btn" class="btn btn-primary">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-save" viewBox="0 0 16 16">
                                        <path d="M2 1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H9.5a1 1 0 0 0-1 1v7.293l2.646-2.647a.5.5 0 0 1 .708.708l-3.5 3.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L7.5 9.293V2a2 2 0 0 1 2-2H14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h2.5a.5.5 0 0 1 0 1z"/>
                                    </svg>
                                    Save Prompt
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Response Schema Editor -->
                    <div class="row mb-4">
                        <!-- Schema Description (Right Side) -->
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header bg-info text-white">
                                    <h5 class="mb-0">Schema Description (English)</h5>
                                </div>
                                <div class="card-body d-flex flex-column">
                                    <p class="text-muted small mb-3">Describe the expected response format in plain English. Click the arrow to generate JSON schema.</p>
                                    <textarea id="schema-description" class="form-control flex-grow-1" rows="10" placeholder="Example:
I need a response that includes:
- A risk level (low, medium, or high)
- A detailed text analysis
- A list of recommendations
- An estimated cost as a number
- An approval likelihood percentage from 0 to 100"></textarea>
                                    <div class="mt-3 text-center">
                                        <button id="generate-schema-btn" class="btn btn-primary btn-lg mb-2">
                                            Generate JSON Schema
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-right ms-2" viewBox="0 0 16 16">
                                                <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8"/>
                                            </svg>
                                        </button>
                                        <div class="d-grid">
                                            <button id="preview-prompt-btn" class="btn btn-outline-success">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-circle" viewBox="0 0 16 16">
                                                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                                                    <path d="M6.271 5.055a.5.5 0 0 1 .52.038l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 6 10.5v-5a.5.5 0 0 1 .271-.445"/>
                                                </svg>
                                                Preview with Sample Record
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- JSON Schema (Left Side) -->
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header bg-warning text-dark">
                                    <h5 class="mb-0">Expected Response Schema (JSON)</h5>
                                </div>
                                <div class="card-body d-flex flex-column">
                                    <p class="text-muted small mb-3">Define the JSON structure you expect from the LLM response. This will be used to validate and parse outputs.</p>
                                    <textarea id="response-schema" class="form-control font-monospace flex-grow-1" rows="10" placeholder='{
  "risk_level": "string (low|medium|high)",
  "analysis": "string",
  "recommendations": ["string"],
  "estimated_cost": "number",
  "approval_likelihood": "number (0-100)"
}'></textarea>
                                    <div class="mt-3">
                                        <button id="validate-schema-btn" class="btn btn-outline-secondary">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle" viewBox="0 0 16 16">
                                                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                                                <path d="m10.97 4.97-.02.022-3.473 4.425-2.093-2.094a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05"/>
                                            </svg>
                                            Validate JSON
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Note about settings -->
                    <div class="alert alert-info">
                        <strong>Model Configuration:</strong> LLM provider, temperature, and other model settings are now configured globally in the <a href="#settings" class="alert-link" onclick="switchTab('settings')">Settings</a> tab.
                    </div>
                </div>

                <!-- Proving Ground Tab -->
                <div id="proving-ground-tab" class="tab-content" style="display: none;">
                    <h2 class="mb-4">Proving Ground</h2>

                    <!-- Analysis Batch Selection -->
                    <div class="card mb-4">
                        <div class="card-header bg-primary text-white">
                            <h5 class="mb-0">Select Analysis Batch</h5>
                        </div>
                        <div class="card-body">
                            <select id="proving-batch-select" class="form-select">
                                <option value="">-- Select an analysis batch --</option>
                            </select>
                            <div id="proving-batch-info" class="mt-3" style="display: none;">
                                <p class="mb-1"><strong>Dataset:</strong> <span id="proving-dataset-name"></span></p>
                                <p class="mb-0"><strong>Status:</strong> <span id="proving-batch-status"></span></p>
                            </div>
                        </div>
                    </div>

                    <!-- Record IDs Input -->
                    <div class="card mb-4">
                        <div class="card-header bg-info text-white">
                            <h5 class="mb-0">Record IDs</h5>
                        </div>
                        <div class="card-body">
                            <label for="proving-claim-names" class="form-label">Enter record IDs (comma, tab, space, or newline separated):</label>
                            <textarea id="proving-claim-names" class="form-control font-monospace" rows="5" placeholder="Record-001, Record-002, Record-003&#10;or paste from Excel:&#10;Record-001&#10;Record-002&#10;Record-003"></textarea>
                            <small class="text-muted">You can paste directly from Excel - supports comma, tab, space, or newline delimiters.</small>
                        </div>
                    </div>

                    <!-- Prompt Configuration Display -->
                    <div class="card mb-4">
                        <div class="card-header bg-warning text-dark">
                            <h5 class="mb-0">Prompt Configuration</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6>Prompt Template:</h6>
                                    <pre id="proving-prompt-display" class="bg-light p-3 rounded" style="max-height: 200px; overflow-y: auto;">No prompt configured</pre>
                                </div>
                                <div class="col-md-6">
                                    <h6>Expected Response Schema:</h6>
                                    <pre id="proving-schema-display" class="bg-light p-3 rounded font-monospace" style="max-height: 200px; overflow-y: auto;">No schema configured</pre>
                                </div>
                            </div>
                            <div class="mt-3 text-center">
                                <button id="proving-run-btn" class="btn btn-success btn-lg">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">
                                        <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393"/>
                                    </svg>
                                    Run Prompt
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Results Table -->
                    <div class="card mb-4">
                        <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Execution Results</h5>
                            <button id="proving-export-btn" class="btn btn-light btn-sm" style="display: none;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
                                    <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
                                    <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"/>
                                </svg>
                                Export CSV
                            </button>
                        </div>
                        <div class="card-body">
                            <div id="proving-results-loading" class="text-center py-5" style="display: none;">
                                <div class="spinner-border text-success mb-3" role="status" style="width: 3rem; height: 3rem;">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                                <p class="text-muted">Executing prompts on records...</p>
                                <p id="proving-progress-text" class="text-muted small"></p>
                            </div>

                            <div id="proving-results-table" style="display: none;">
                                <div class="table-responsive">
                                    <table class="table table-striped table-hover">
                                        <thead id="proving-results-thead">
                                            <!-- Dynamically populated -->
                                        </thead>
                                        <tbody id="proving-results-tbody">
                                            <!-- Dynamically populated -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <div id="proving-results-error" class="alert alert-danger" style="display: none;">
                                <h5 class="alert-heading">Error</h5>
                                <p id="proving-results-error-message" class="mb-0"></p>
                            </div>

                            <div id="proving-no-results" class="text-muted text-center py-5">
                                Configure your prompt in the Prompt Builder, enter record IDs above, and click "Run Prompt" to execute.
                            </div>

                            <div id="proving-error" class="alert alert-danger" style="display: none;">
                                <h6 class="alert-heading">Error</h6>
                                <p id="proving-error-message" class="mb-0"></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Batch Execution Tab -->
                <div id="batch-execution-tab" class="tab-content" style="display: none;">
                    <h2 class="mb-4">Batch Execution</h2>

                    <!-- Active Executions Alert -->
                    <div id="active-executions-alert" class="alert alert-info" style="display: none;">
                        <h5 class="alert-heading">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-hourglass-split me-2" viewBox="0 0 16 16">
                                <path d="M2.5 15a.5.5 0 1 1 0-1h1v-1a4.5 4.5 0 0 1 2.557-4.06c.29-.139.443-.377.443-.59v-.7c0-.213-.154-.451-.443-.59A4.5 4.5 0 0 1 3.5 3V2h-1a.5.5 0 0 1 0-1h11a.5.5 0 0 1 0 1h-1v1a4.5 4.5 0 0 1-2.557 4.06c-.29.139-.443.377-.443.59v.7c0 .213.154.451.443.59A4.5 4.5 0 0 1 12.5 13v1h1a.5.5 0 0 1 0 1zm2-13v1c0 .537.12 1.045.337 1.5h6.326c.216-.455.337-.963.337-1.5V2zm3 6.35c0 .701-.478 1.236-1.011 1.492A3.5 3.5 0 0 0 4.5 13s.866-1.299 3-1.48zm1 0v3.17c2.134.181 3 1.48 3 1.48a3.5 3.5 0 0 0-1.989-3.158C8.978 9.586 8.5 9.052 8.5 8.351z"/>
                            </svg>
                            Active Execution in Progress
                        </h5>
                        <p class="mb-2"><strong>Batch:</strong> <span id="active-exec-batch-name"></span></p>
                        <p class="mb-2"><strong>Progress:</strong> <span id="active-exec-progress"></span></p>
                        <button id="view-active-exec-btn" class="btn btn-sm btn-primary">View Progress Below</button>
                    </div>

                    <!-- Batch Selection -->
                    <div class="card mb-4">
                        <div class="card-header bg-primary text-white">
                            <h5 class="mb-0">Select Analysis Batch</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <label for="batch-exec-select" class="form-label">Choose a batch to execute:</label>
                                <select id="batch-exec-select" class="form-select">
                                    <option value="">-- Select an analysis batch --</option>
                                </select>
                            </div>

                            <div id="batch-exec-info" style="display: none;">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p><strong>Dataset:</strong> <span id="batch-exec-dataset-name"></span></p>
                                        <p><strong>Status:</strong> <span id="batch-exec-status"></span></p>
                                    </div>
                                    <div class="col-md-6">
                                        <p><strong>Prompt Configured:</strong> <span id="batch-exec-prompt-status" class="badge"></span></p>
                                        <p><strong>Estimated Records:</strong> <span id="batch-exec-record-count">Unknown</span></p>
                                    </div>
                                </div>

                                <div class="mt-3">
                                    <label for="batch-exec-record-ids" class="form-label">
                                        <strong>Filter by Record IDs (Optional)</strong>
                                        <small class="text-muted">- Leave empty to process all records</small>
                                    </label>
                                    <textarea
                                        id="batch-exec-record-ids"
                                        class="form-control"
                                        rows="6"
                                        placeholder="Enter record IDs to filter (one per line, or comma/tab separated)&#10;Example:&#10;REC-001&#10;REC-002&#10;REC-003&#10;&#10;Leave empty to run on entire dataset"></textarea>
                                    <small class="form-text text-muted">
                                        Use this to test your batch on a small subset before running the full dataset.
                                    </small>
                                </div>

                                <div class="text-center mt-3">
                                    <button id="batch-exec-run-btn" class="btn btn-success btn-lg" disabled>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-play-fill me-2" viewBox="0 0 16 16">
                                            <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393"/>
                                        </svg>
                                        Execute Batch
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Progress Section -->
                    <div id="batch-exec-progress-section" class="card mb-4" style="display: none;">
                        <div class="card-header bg-info text-white">
                            <h5 class="mb-0">Execution Progress</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-2">
                                    <span><strong>Processing Records:</strong> <span id="batch-exec-current">0</span> / <span id="batch-exec-total">0</span></span>
                                    <span><strong>ETA:</strong> <span id="batch-exec-eta">Calculating...</span></span>
                                </div>
                                <div class="progress" style="height: 30px;">
                                    <div id="batch-exec-progress-bar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%">0%</div>
                                </div>
                            </div>

                            <div class="alert alert-info">
                                <strong>Status:</strong> <span id="batch-exec-status-message">Starting...</span>
                            </div>
                        </div>
                    </div>

                    <!-- Results Section -->
                    <div id="batch-exec-results-section" class="card mb-4" style="display: none;">
                        <div class="card-header bg-success text-white">
                            <h5 class="mb-0">Execution Complete</h5>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-md-3">
                                    <div class="card text-center">
                                        <div class="card-body">
                                            <h3 id="batch-exec-total-processed">0</h3>
                                            <p class="text-muted mb-0">Records Processed</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card text-center">
                                        <div class="card-body">
                                            <h3 id="batch-exec-success-count">0</h3>
                                            <p class="text-muted mb-0">Successful</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card text-center">
                                        <div class="card-body">
                                            <h3 id="batch-exec-error-count">0</h3>
                                            <p class="text-muted mb-0">Errors</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card text-center">
                                        <div class="card-body">
                                            <h3 id="batch-exec-duration">0s</h3>
                                            <p class="text-muted mb-0">Duration</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="alert alert-success">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-check-circle-fill me-2" viewBox="0 0 16 16">
                                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                                </svg>
                                <strong>CSV file generated and uploaded to Salesforce CRM Analytics dataset: Structured_Response</strong>
                            </div>

                            <p><strong>CSV File:</strong> <code id="batch-exec-csv-filename"></code></p>
                            <button id="batch-exec-download-csv" class="btn btn-primary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download me-2" viewBox="0 0 16 16">
                                    <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
                                    <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"/>
                                </svg>
                                Download CSV
                            </button>
                        </div>
                    </div>

                    <!-- Error Section -->
                    <div id="batch-exec-error-section" class="card mb-4" style="display: none;">
                        <div class="card-header bg-danger text-white">
                            <h5 class="mb-0">Execution Failed</h5>
                        </div>
                        <div class="card-body">
                            <div class="alert alert-danger">
                                <strong>Error:</strong> <span id="batch-exec-error-message"></span>
                            </div>
                            <button id="batch-exec-retry-btn" class="btn btn-warning">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise me-2" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
                                    <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
                                </svg>
                                Retry Execution
                            </button>
                        </div>
                    </div>
                </div>

                <!-- History Tab -->
                <div id="history-tab" class="tab-content" style="display: none;">
                    <h2 class="mb-4">Execution History</h2>

                    <div class="card mb-4">
                        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Batch Execution History</h5>
                            <button id="download-all-csv-btn" class="btn btn-light btn-sm">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
                                    <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
                                    <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"/>
                                </svg>
                                Download Combined CSV
                            </button>
                        </div>
                        <div class="card-body">
                            <div id="history-loading" class="text-center py-3">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                            </div>
                            <div id="history-list-container" style="display: none;">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Batch Name</th>
                                            <th>Dataset</th>
                                            <th>Executed</th>
                                            <th>Records</th>
                                            <th>Success</th>
                                            <th>Errors</th>
                                            <th>Duration</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="history-list-tbody">
                                        <!-- Populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                            <div id="no-history" style="display: none;">
                                <p class="text-muted text-center py-3">No execution history found. Execute a batch to see results here.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div id="settings-tab" class="tab-content" style="display: none;">
                    <h2 class="mb-4">Settings</h2>

                    <div class="card">
                        <div class="card-header bg-primary text-white">
                            <h5 class="mb-0">LLM Configuration</h5>
                        </div>
                        <div class="card-body">
                            <div class="alert alert-info">
                                <strong>Note:</strong> These settings apply globally to all prompt executions in Proving Ground and Batch Execution.
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="settings-provider" class="form-label">Provider:</label>
                                    <select id="settings-provider" class="form-select">
                                        <option value="lm_studio">LM Studio (Local)</option>
                                        <option value="copilot">Microsoft Copilot</option>
                                    </select>
                                    <small class="text-muted">Choose your LLM provider (OpenAI disabled - no BAA)</small>
                                </div>
                                <div class="col-md-6" id="settings-endpoint-group">
                                    <label for="settings-endpoint" class="form-label">Endpoint:</label>
                                    <input type="text" id="settings-endpoint" class="form-control" value="http://localhost:1234" placeholder="http://localhost:1234">
                                    <small class="text-muted">LM Studio endpoint URL</small>
                                </div>
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-12">
                                    <label for="settings-model" class="form-label">Model:</label>
                                    <input type="text" id="settings-model" class="form-control" value="gpt-4o-mini" placeholder="gpt-4o-mini">
                                    <small class="text-muted">Model name (for OpenAI/Copilot). Note: API keys are configured in .env file for security.</small>
                                </div>
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-4">
                                    <label for="settings-temperature" class="form-label">Temperature:</label>
                                    <input type="number" id="settings-temperature" class="form-control" value="0.7" min="0" max="2" step="0.1">
                                    <small class="text-muted">0.0 = Deterministic, 2.0 = Creative</small>
                                </div>
                                <div class="col-md-4">
                                    <label for="settings-max-tokens" class="form-label">Max Tokens:</label>
                                    <input type="number" id="settings-max-tokens" class="form-control" value="4000" min="100" max="8000" step="100">
                                    <small class="text-muted">Maximum response length</small>
                                </div>
                                <div class="col-md-4">
                                    <label for="settings-timeout" class="form-label">Timeout (seconds):</label>
                                    <input type="number" id="settings-timeout" class="form-control" value="60" min="10" max="300" step="10">
                                    <small class="text-muted">Request timeout</small>
                                </div>
                            </div>

                            <div class="d-flex gap-2">
                                <button id="save-settings-btn" class="btn btn-success">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle" viewBox="0 0 16 16">
                                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                                        <path d="m10.97 4.97-.02.022-3.473 4.425-2.093-2.094a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05"/>
                                    </svg>
                                    Save Settings
                                </button>
                                <button id="test-connection-btn" class="btn btn-outline-primary">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-lightning" viewBox="0 0 16 16">
                                        <path d="M5.52.359A.5.5 0 0 1 6 0h4a.5.5 0 0 1 .474.658L8.694 6H12.5a.5.5 0 0 1 .395.807l-7 9a.5.5 0 0 1-.873-.454L6.823 9.5H3.5a.5.5 0 0 1-.48-.641zM6.374 1 4.168 8.5H7.5a.5.5 0 0 1 .478.647L6.78 13.04 11.478 7H8a.5.5 0 0 1-.474-.658L9.306 1z"/>
                                    </svg>
                                    Test Connection
                                </button>
                            </div>

                            <div id="settings-status" class="mt-3" style="display: none;"></div>
                        </div>
                    </div>

                    <div class="card mt-4">
                        <div class="card-header bg-info text-white">
                            <h5 class="mb-0">HIPAA Compliance</h5>
                        </div>
                        <div class="card-body">
                            <h6>User Authentication</h6>
                            <p class="mb-2">This application uses <strong>SFDC_USERNAME</strong> from your .env file as your authenticated user identity for HIPAA audit logging.</p>
                            <small class="text-muted">
                                <strong>Rationale:</strong> Since this is a single-user, localhost-only application running on your Windows machine, a separate login system is unnecessary. All audit logs will attribute actions to the SFDC_USERNAME configured in your environment.
                            </small>

                            <h6 class="mt-3">Access Control</h6>
                            <ul class="mb-2">
                                <li><strong>Network:</strong> Localhost only (127.0.0.1)</li>
                                <li><strong>Database:</strong> Encrypted with AES-256 (SQLCipher)</li>
                                <li><strong>Audit Logs:</strong> All PHI access tracked to user</li>
                                <li><strong>LLM Providers:</strong> Only approved providers with BAAs</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card mt-4">
                        <div class="card-header bg-secondary text-white">
                            <h5 class="mb-0">Application Information</h5>
                        </div>
                        <div class="card-body">
                            <p><strong>Version:</strong> 2.0</p>
                            <p><strong>Environment:</strong> <span id="env-info">Loading...</span></p>
                            <p class="mb-0"><strong>API Keys:</strong> Configure in .env file for security</p>
                            <small class="text-muted">
                                <ul class="mt-2 mb-0">
                                    <li>COPILOT_API_KEY - For Microsoft Copilot provider (BAA verified)</li>
                                    <li>OPENAI_API_KEY - Disabled (no BAA in place)</li>
                                </ul>
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Dataset Configuration Modal -->
    <div class="modal fade" id="datasetConfigModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="dataset-modal-title">New Dataset Configuration</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="dataset-config-form">
                        <input type="hidden" id="modal-dataset-id">

                        <!-- Dataset Name -->
                        <div class="mb-3">
                            <label for="modal-dataset-name" class="form-label">Dataset Name <span class="text-danger">*</span></label>
                            <input type="text" id="modal-dataset-name" class="form-control" placeholder="Enter a descriptive name" required>
                            <small class="text-muted">This is your custom name for this dataset configuration</small>
                        </div>

                        <!-- CRM Analytics Dataset Selection -->
                        <div class="mb-3">
                            <label for="modal-crm-dataset-select" class="form-label">CRM Analytics Dataset <span class="text-danger">*</span></label>
                            <select id="modal-crm-dataset-select" class="form-select" required>
                                <option value="">-- Choose a dataset --</option>
                            </select>
                            <small class="text-muted">Select from available CRM Analytics datasets</small>
                        </div>

                        <!-- Record ID Field -->
                        <div class="mb-3">
                            <label for="modal-record-id-field" class="form-label">Record ID Field <span class="text-danger">*</span></label>
                            <select id="modal-record-id-field" class="form-select" required>
                                <option value="">-- Select dataset first --</option>
                            </select>
                            <small class="text-muted">Field to use as the record name/identifier</small>
                        </div>

                        <!-- SAQL Filter -->
                        <div class="mb-3">
                            <label for="modal-saql-filter" class="form-label">SAQL Filter (Optional)</label>
                            <textarea id="modal-saql-filter" class="form-control font-monospace" rows="3" placeholder='q = filter q by "Status" == "Active";'></textarea>
                            <div class="d-flex justify-content-between align-items-center mt-2">
                                <small class="text-muted">Enter SAQL filter statement</small>
                                <button type="button" id="modal-test-filter-btn" class="btn btn-sm btn-outline-primary">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-play-circle me-1" viewBox="0 0 16 16">
                                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                                        <path d="M6.271 5.055a.5.5 0 0 1 .52.038l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 6 10.5v-5a.5.5 0 0 1 .271-.445"/>
                                    </svg>
                                    Test Filter
                                </button>
                            </div>
                            <div id="modal-filter-test-result" class="mt-2" style="display: none;"></div>
                        </div>

                        <!-- Field Selection -->
                        <div class="mb-3">
                            <label class="form-label">Field Selection <span class="text-danger">*</span></label>
                            <div class="border rounded p-3" style="max-height: 300px; overflow-y: auto; background-color: #f8f9fa;">
                                <div class="mb-2">
                                    <input type="text" id="modal-field-search" class="form-control form-control-sm" placeholder="Search fields...">
                                </div>
                                <div class="mb-2">
                                    <button type="button" id="modal-select-all-fields-btn" class="btn btn-sm btn-outline-primary me-2">Select All</button>
                                    <button type="button" id="modal-deselect-all-fields-btn" class="btn btn-sm btn-outline-secondary">Deselect All</button>
                                </div>
                                <div id="modal-field-selection-list">
                                    <p class="text-muted small">Select a dataset to see available fields</p>
                                </div>
                            </div>
                            <small class="text-muted">Select fields to make available in other tabs</small>
                        </div>

                        <!-- Picklist Field Selection -->
                        <div class="mb-3">
                            <label class="form-label">Picklist Fields (Optional)</label>
                            <div class="border rounded p-3" style="max-height: 300px; overflow-y: auto; background-color: #f8f9fa;">
                                <div class="mb-2">
                                    <input type="text" id="modal-picklist-search" class="form-control form-control-sm" placeholder="Search picklist fields...">
                                </div>
                                <div id="modal-picklist-selection-list">
                                    <p class="text-muted small">Select a dataset to see available fields</p>
                                </div>
                            </div>
                            <small class="text-muted">Select dimension fields to use as picklists (distinct values will be fetched and concatenated with |)</small>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-success" id="save-dataset-modal-btn">Save Dataset</button>
                </div>
            </div>
        </div>
    </div>

    <!-- New Analysis Modal -->
    <div class="modal fade" id="newAnalysisModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Create New Analysis</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="new-analysis-form">
                        <div class="mb-3">
                            <label for="analysis-name" class="form-label">Analysis Name:</label>
                            <input type="text" class="form-control" id="analysis-name" required>
                        </div>
                        <div class="mb-3">
                            <label for="analysis-dataset" class="form-label">Configured Dataset:</label>
                            <select id="analysis-dataset" class="form-select" required>
                                <option value="">-- Choose a configured dataset --</option>
                            </select>
                            <small class="text-muted">Select from datasets configured in the Datasets tab</small>
                        </div>
                        <div class="mb-3">
                            <label for="analysis-description" class="form-label">Description (optional):</label>
                            <textarea class="form-control" id="analysis-description" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="save-analysis-btn">Create Analysis</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Preview Prompt Modal -->
    <div class="modal fade" id="previewPromptModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-play-circle me-2" viewBox="0 0 16 16">
                            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                            <path d="M6.271 5.055a.5.5 0 0 1 .52.038l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 6 10.5v-5a.5.5 0 0 1 .271-.445"/>
                        </svg>
                        Prompt Preview - Model Response
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <!-- Record ID Selection -->
                    <div id="preview-record-selection" class="mb-4">
                        <div class="row align-items-end">
                            <div class="col-md-9">
                                <label for="preview-record-id-input" class="form-label">Record ID (optional)</label>
                                <input type="text" id="preview-record-id-input" class="form-control" placeholder="Leave blank for random sample">
                                <small class="text-muted">Enter a specific Record ID to preview, or leave blank to use a random sample</small>
                            </div>
                            <div class="col-md-3">
                                <button id="preview-execute-btn" class="btn btn-success w-100">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill me-1" viewBox="0 0 16 16">
                                        <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393"/>
                                    </svg>
                                    Execute Preview
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Loading State -->
                    <div id="preview-loading" class="text-center py-5" style="display: none;">
                        <div class="spinner-border text-success mb-3" role="status" style="width: 3rem; height: 3rem;">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p class="text-muted">Executing prompt with model...</p>
                    </div>

                    <!-- Preview Content -->
                    <div id="preview-content" style="display: none;">
                        <div class="row">
                            <div class="col-md-6">
                                <h6 class="text-primary">Sample Record Data</h6>
                                <pre id="preview-record-data" class="bg-light p-3 rounded" style="max-height: 300px; overflow-y: auto;"></pre>
                            </div>
                            <div class="col-md-6">
                                <h6 class="text-info">Rendered Prompt</h6>
                                <pre id="preview-rendered-prompt" class="bg-light p-3 rounded" style="max-height: 300px; overflow-y: auto;"></pre>
                            </div>
                        </div>
                        <hr class="my-4">
                        <div>
                            <h6 class="text-success">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-robot me-2" viewBox="0 0 16 16">
                                    <path d="M6 12.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5M3 8.062C3 6.76 4.235 5.765 5.53 5.886a26.6 26.6 0 0 0 4.94 0C11.765 5.765 13 6.76 13 8.062v1.157a.93.93 0 0 1-.765.935c-.845.147-2.34.346-4.235.346s-3.39-.2-4.235-.346A.93.93 0 0 1 3 9.219zm4.542-.827a.25.25 0 0 0-.217.068l-.92.9a25 25 0 0 1-1.871-.183.25.25 0 0 0-.068.495c.55.076 1.232.149 2.02.193a.25.25 0 0 0 .189-.071l.754-.736.847 1.71a.25.25 0 0 0 .404.062l.932-.97a25 25 0 0 0 1.922-.188.25.25 0 0 0-.068-.495c-.538.074-1.207.145-1.98.189a.25.25 0 0 0-.166.076l-.754.785-.842-1.7a.25.25 0 0 0-.182-.135"/>
                                    <path d="M8.5 1.866a1 1 0 1 0-1 0V3h-2A4.5 4.5 0 0 0 1 7.5V8a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1v1a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-1a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1v-.5A4.5 4.5 0 0 0 10.5 3h-2zM14 7.5V13a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7.5A3.5 3.5 0 0 1 5.5 4h5A3.5 3.5 0 0 1 14 7.5"/>
                                </svg>
                                Model Response
                            </h6>
                            <div class="card border-success">
                                <div class="card-body">
                                    <pre id="preview-model-response" class="mb-0" style="white-space: pre-wrap; max-height: 400px; overflow-y: auto;"></pre>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Error State -->
                    <div id="preview-error" class="alert alert-danger" style="display: none;">
                        <h6 class="alert-heading">Error</h6>
                        <p id="preview-error-message" class="mb-0"></p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
